// ***************************************************************************
// Copyright (c) 2013 SAP AG or an SAP affiliate company. All rights reserved.
// ***************************************************************************
// サンプルコードは「現状有姿(as is)」の条件で提供されるものであり、
// お客様に対しいかなる保証責任も賠償責任も負わないものとします。
//
// お客様は、当該サンプルコードを使用、複製および配布することができます。
// ただし、アイエニウェアの原コードに関する著作権表示およびにこれに対する
// 免責表示をすることを条件とします。
// 
// ********************************************************************

		    Mobile Link Contact のサンプル

目的
----
このサンプルは、1 つの統合データベースと 2 つのリモートデータベース
間のデータの同期を説明するためのものです。

データベースは以下の 4 つのメインテーブルで構成されています。
 SalesRep には、営業担当者のリストが格納されています。
 Customer には、顧客のリストが格納されています。
 Contact には、担当者のリストが格納されています。担当者は、いずれかの
 顧客です。
 Product は、顧客に販売された製品のリストです。

営業担当者と顧客の間は 1 対多の関係であり、顧客と担当者の間も 1 対多の
関係です。Product テーブルは、他のテーブルと関連付けられていません。

各リモートデータベースは 1 人の営業担当者のデータベースであり、以下の
2 つのパブリケーションを持っています。
Contact：
  以下のデータを統合データベースに送信します。
   Customer および Contact テーブルの変更内容
  以下のデータを統合データベースから受信します。
   SalesRep からローを 1 つだけ
   営業担当者に割り当てられた顧客のみ
   営業担当者に割り当てられ、顧客に関連付けられた担当者のみ

Product:
  以下のデータを統合データベースに送信します。
   注文に関連付けられた数量の変更内容
  以下のデータを統合データベースから受信します。
   すべての製品情報の完全なスナップショット

統合データベースには、次に説明する同期スクリプトが格納されています。
  - 外部キー関係に関わるテーブルの情報のメンテナンス
  - 領域の再編成 (営業担当者間での顧客の再編成) を許可するスクリプト
  - エラーのログ
  - Product テーブルにおける競合解決

処理手順
--------
UNIX 上でこのサンプルを実行する場合、以下の手順で .bat を .sh に置き換
えてください。

build.bat を実行すると、統合データベースおよびリモートデータベースを作
成し、スクリプト、パブリケーション、およびデータを追加します。

step1.bat を実行すると、Mobile Link 同期サーバを起動します。
step2.bat を実行すると、同期を行います。
step3.bat を実行すると、Mobile Link 同期サーバをシャットダウンします。

テーブル内の情報を変更して再同期することにより、稼働中のスクリプトを見ることができます。

report.bat を実行すると、各データベースの内容を report.txt に出力します。

clean.bat を実行すると、生成されたすべてのファイルを削除します。
