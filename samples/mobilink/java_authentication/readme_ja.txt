// ***************************************************************************
// Copyright (c) 2013 SAP AG or an SAP affiliate company. All rights reserved.
// ***************************************************************************
// サンプルコードは「現状有姿(as is)」の条件で提供されるものであり、
// お客様に対しいかなる保証責任も賠償責任も負わないものとします。
//
// お客様は、当該サンプルコードを使用、複製および配布することができます。
// ただし、アイエニウェアの原コードに関する著作権表示およびにこれに対する
// 免責表示をすることを条件とします。
// 
// ********************************************************************

		  Mobile Link Java サンプル

目的
----
このサンプルは、Java 同期論理の記述方法を説明するためのものです。この
サンプルは、Java 同期論理を使用してユーザー認証を行います。

データベースは以下の 2 つのテーブルで構成されています。
- emp には、営業担当者のリストが格納されています。
- cust には、顧客のリストが格納されています。
営業担当者と顧客は 1 対多の関係です。

リモートデータベースは 1 人の営業担当者のデータベースであり、以下の
データを統合データベースから受信します。
- emp からローを 1 つのみ (従業員 emp2)
- emp2 に割り当てられた顧客のみ
すべての関連データが、毎回リモートデータベースにダウンロードされます
(スナップショット同期)。

リモートデータベースで入力されたすべての顧客データが統合データベース
に同期されます。

最初の同期で、ユーザー ID が login_added テーブルに追加されます。
以降の同期では、ローが login_audit テーブルに追加されます。
このサンプルでは、login_added テーブルにユーザー ID を追加する前のテス
トは行いません。


処理手順
--------
これを実行するには JDK バージョン 1.6 が必要となります。
Sun Java JDK 1.6 がインストールされており、次の環境変数（JAVAHOME、
JAVA_HOME、JDKHOME または JDK_HOME）の１つが適切に設定されている事を確
認して下さい。

UNIX 上でこのサンプルを実行する場合、以下の手順で .bat を .sh に置き換
えてください。

build.bat を実行すると、統合データベースおよびリモートデータベースを
作成し、スクリプト、パブリケーション、およびデータを追加します。

step1.bat を実行すると、Mobile Link 同期サーバーを起動します。
step2.bat を実行すると、同期を行います。
step3.bat を実行すると、Mobile Link 同期サーバーをシャットダウンします。

report.bat を実行すると、各データベースの内容を report.txt に出力します。

この手順の最後に、データが同期され、ローが login_added に追加されます。
login_audit に追加されたローを見るため、再度この手順を通して実行したい
場合、

clean.bat を実行すると、生成されたすべてのファイルを削除します。


ファイル
--------
build_consol.sql および build_remote.sql には、データベースオブジェ
クトを作成する SQL 命令が含まれています。build_remote.sql は、パブリ
ケーション、同期ユーザー、および同期サブスクリプションを作成します。統
合データベースでの同期スクリプトは、Mobile Link データベースサーバーに
より自動的に作成されます。
